<app-navbar></app-navbar>
<section class="container" *ngIf="conta">
  <div class="section-content">
    <h2>Informações</h2>

    <div class="saldo-content">
      <span>Saldo disponível</span>

      <div class="info-saldo">
        <mat-icon
          aria-hidden="false"
          aria-label="Ícone de 'wallet'"
          fontIcon="wallet"
        ></mat-icon>
        <span>{{ conta.saldo | currency : "BRL" : "symbol" : "1.2-2" }}</span>
      </div>
    </div>

    <div class="info-extrato">
      <button class="botao-extrato" (click)="expandirOperacao('extrato')">
        <mat-icon
        aria-hidden="false"
        aria-label="Ícone de 'attach_money'"
        fontIcon="attach_money"
      ></mat-icon>
        <span>Visualizar Extrato</span>
      </button>

      <div *ngIf="operacaoAtiva == 'extrato'" class="campos-operacao">
        <form [formGroup]="formExtrato" (ngSubmit)="gerarExtrato()" class="form-extrato-container">
          <div class="input-group">
            <label for="dataInicio">Data de Início:</label>
            <input id="dataInicio" class="valor-input" type="date" formControlName="dataInicio">
          </div>

          <div class="input-group">
            <label for="dataFim">Data de Fim:</label>
            <input id="dataFim" class="valor-input" type="date" formControlName="dataFim">
          </div>

          <div class="acao-btn">
            <button class="enviar-btn" type="submit" [disabled]="formExtrato.invalid">Gerar Extrato</button>
          </div>
        </form>

        <div *ngIf="mensagem && operacaoAtiva == 'extrato'" class="mensagem-operacao"
          [ngClass]="{ 'sucesso': tipoMensagem === 'sucesso', 'erro': tipoMensagem === 'erro' }">
          {{ mensagem }}
        </div>
      </div>
    </div>

    <div class="info-perfil">
      <a routerLink="/perfil">Editar perfil</a>
    </div>

  </div>

  <div class="section-content">
    <h2>Operações</h2>
    <div class="content-operacoes">
      <div class="operacao" [class.operacaoAtiva]="operacaoAtiva == 'saque'">
        <button class="op" (click)="expandirOperacao('saque')">
          <span>Saque</span>
          <mat-icon
            aria-hidden="false"
            aria-label="Ícone de 'seta'"
            fontIcon="chevron_right"
          ></mat-icon>
        </button>

        <div *ngIf="operacaoAtiva == 'saque'" class="campos-operacao">
          <input
            class="valor-input"
            type="number"
            placeholder="Insira um valor"
            [(ngModel)]="valorSaque"
          />
          <div class="acao-btn">
            <button class="enviar-btn" (click)="realizarSaque()">Enviar</button>
          </div>
          <div *ngIf="mensagem && operacaoAtiva == 'saque'" class="mensagem-operacao"
            [ngClass]="{ 'sucesso': tipoMensagem === 'sucesso', 'erro': tipoMensagem === 'erro' }">
            {{ mensagem }}
          </div>
        </div>
      </div>

      <div class="operacao" [class.operacaoAtiva]="operacaoAtiva == 'deposito'">
        <button class="op" (click)="expandirOperacao('deposito')">
          <span>Depósito</span>
          <mat-icon
            aria-hidden="false"
            aria-label="Ícone de 'seta'"
            fontIcon="chevron_right"
          ></mat-icon>
        </button>

        <div *ngIf="operacaoAtiva == 'deposito'" class="campos-operacao">
          <input
            class="valor-input"
            type="number"
            placeholder="Insira um valor"
            [(ngModel)]="valorDeposito"
          />
          <div class="acao-btn">
            <button class="enviar-btn" (click)="realizarDeposito()">Enviar</button>
          </div>
          <div *ngIf="mensagem && operacaoAtiva == 'deposito'" class="mensagem-operacao"
            [ngClass]="{ 'sucesso': tipoMensagem === 'sucesso', 'erro': tipoMensagem === 'erro' }">
            {{ mensagem }}
          </div>
        </div>
      </div>

      <div
        class="operacao"
        [class.operacaoAtiva]="operacaoAtiva == 'transferencia'"
      >
        <button class="op" (click)="expandirOperacao('transferencia')">
          <span>Transferência</span>
          <mat-icon
            aria-hidden="false"
            aria-label="Ícone de 'seta'"
            fontIcon="chevron_right"
          ></mat-icon>
        </button>

        <div *ngIf="operacaoAtiva == 'transferencia'" class="campos-operacao">
          <input
            class="valor-input"
            type="number"
            placeholder="Insira um valor"
            [(ngModel)]="valorTransferencia"
          />
          <input
            class="valor-input"
            type="text"
            placeholder="Conta de destino"
            [(ngModel)]="contaDestino"
          />
          <div class="acao-btn">
            <button class="enviar-btn" (click)="realizarTransferencia()">Enviar</button>
          </div>
          <div *ngIf="mensagem && operacaoAtiva == 'transferencia'" class="mensagem-operacao"
            [ngClass]="{ 'sucesso': tipoMensagem === 'sucesso', 'erro': tipoMensagem === 'erro' }">
            {{ mensagem }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
